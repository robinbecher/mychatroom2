<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="index.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
<body>

<h2>Chatroom</h2>

<button class="goButton" onclick="document.getElementById('id01').style.display='block'" style="width:auto;">Go!</button>

<div id="id01" class="modal">

    <form class="modal-content animate" action="chatroom.html" onsubmit="storeUsername()">
        <div class="imgcontainer">
            <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
            <img src="files/avatars.png" alt="Avatar" class="avatar">
        </div>

        <div class="container">
            <label><b>Username</b></label>
            <input id="unameText" type="text" placeholder="Enter Username" required>
            <!--<label for="psw"><b>Password</b></label>-->
            <!--<input type="password" placeholder="Enter Password" name="psw" required>-->
            <button type="submit">Join Chatroom</button>
            <!--<label>-->
                <!--<input type="checkbox" checked="checked" name="remember"> Remember me-->
            <!--</label>-->
        </div>

        <div class="container" style="background-color:#f1f1f1">
            <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
            <!--<span class="psw">Forgot <a href="#">password?</a></span>-->
        </div>
    </form>
</div>

<h2>Canvas Tests</h2>
<button class="goButton" onclick="moveToCanvasPage()">Go?</button>

<script>

    if(sessionStorage.getItem("name") === null || sessionStorage.getItem("name")==="null" || sessionStorage.getItem("name")===""){

    }else{
        window.location.replace('/chatroom.html');
    }

    // Get the modal
    var modal = document.getElementById('id01');

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

    function moveToCanvasPage(){
        window.location.replace('/canvas.html');
    }

    function storeUsername(){
        var username = document.getElementById("unameText").value;
        sessionStorage.setItem("name", username);
    }

    function setCookie(cname, cvalue, exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
        var expires = "expires="+d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }

    function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }

    function checkCookie() {
        var user = getCookie("username");
        if (user != "") {
            alert("Welcome again " + user);
        } else {
            user = prompt("Please enter your name:", "");
            if (user != "" && user != null) {
                setCookie("username", user, 365);
            }
        }
    }
</script>

</body>
</html>
